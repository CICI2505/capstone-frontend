{"ast":null,"code":"import api from'../../lib/axiosInstance';const mapBackendError=msg=>{const normalized=msg.toLowerCase();if(normalized.includes(\"tidak ditemukan\"))return\"EMAIL_NOT_FOUND\";if(normalized.includes(\"password\")&&normalized.includes(\"salah\"))return\"WRONG_PASSWORD\";if(normalized.includes(\"wajib diisi\"))return\"EMPTY_FIELDS\";return\"UNKNOWN_ERROR\";};/**\n * Login user dan simpan data ke localStorage\n * @param {Object} credentials - { email, password }\n * @returns {Object} - { success, token, user, message } atau error info\n */export const loginUser=async _ref=>{let{email,password}=_ref;try{const{data}=await api.post('/api/auth/login',{email,password});const{token,user,message}=data;if(!token||!(user!==null&&user!==void 0&&user.id)){return{success:false,errorCode:\"INVALID_RESPONSE\",errorMessage:\"Respon login tidak lengkap\"};}// ✅ Simpan ke localStorage\nlocalStorage.setItem('token',token);localStorage.setItem('user_id',user.id);localStorage.setItem('profile',JSON.stringify(user));return{success:true,token,user,message};}catch(err){var _err$response,_err$response$data;const msg=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Login gagal\";return{success:false,errorCode:mapBackendError(msg),errorMessage:msg};}};","map":{"version":3,"names":["api","mapBackendError","msg","normalized","toLowerCase","includes","loginUser","_ref","email","password","data","post","token","user","message","id","success","errorCode","errorMessage","localStorage","setItem","JSON","stringify","err","_err$response","_err$response$data","response"],"sources":["C:/capstone-project-CC25/frontend/src/services/auth/loginUser.js"],"sourcesContent":["import api from '../../lib/axiosInstance';\n\nconst mapBackendError = (msg) => {\n  const normalized = msg.toLowerCase();\n  if (normalized.includes(\"tidak ditemukan\")) return \"EMAIL_NOT_FOUND\";\n  if (normalized.includes(\"password\") && normalized.includes(\"salah\")) return \"WRONG_PASSWORD\";\n  if (normalized.includes(\"wajib diisi\")) return \"EMPTY_FIELDS\";\n  return \"UNKNOWN_ERROR\";\n};\n\n/**\n * Login user dan simpan data ke localStorage\n * @param {Object} credentials - { email, password }\n * @returns {Object} - { success, token, user, message } atau error info\n */\nexport const loginUser = async ({ email, password }) => {\n  try {\n    const { data } = await api.post('/api/auth/login', { email, password });\n\n    const { token, user, message } = data;\n\n    if (!token || !user?.id) {\n      return {\n        success: false,\n        errorCode: \"INVALID_RESPONSE\",\n        errorMessage: \"Respon login tidak lengkap\",\n      };\n    }\n\n    // ✅ Simpan ke localStorage\n    localStorage.setItem('token', token);\n    localStorage.setItem('user_id', user.id);\n    localStorage.setItem('profile', JSON.stringify(user));\n\n    return {\n      success: true,\n      token,\n      user,\n      message,\n    };\n  } catch (err) {\n    const msg = err.response?.data?.message || \"Login gagal\";\n    return {\n      success: false,\n      errorCode: mapBackendError(msg),\n      errorMessage: msg,\n    };\n  }\n};"],"mappings":"AAAA,MAAO,CAAAA,GAAG,KAAM,yBAAyB,CAEzC,KAAM,CAAAC,eAAe,CAAIC,GAAG,EAAK,CAC/B,KAAM,CAAAC,UAAU,CAAGD,GAAG,CAACE,WAAW,CAAC,CAAC,CACpC,GAAID,UAAU,CAACE,QAAQ,CAAC,iBAAiB,CAAC,CAAE,MAAO,iBAAiB,CACpE,GAAIF,UAAU,CAACE,QAAQ,CAAC,UAAU,CAAC,EAAIF,UAAU,CAACE,QAAQ,CAAC,OAAO,CAAC,CAAE,MAAO,gBAAgB,CAC5F,GAAIF,UAAU,CAACE,QAAQ,CAAC,aAAa,CAAC,CAAE,MAAO,cAAc,CAC7D,MAAO,eAAe,CACxB,CAAC,CAED;AACA;AACA;AACA;AACA,GACA,MAAO,MAAM,CAAAC,SAAS,CAAG,MAAAC,IAAA,EAA+B,IAAxB,CAAEC,KAAK,CAAEC,QAAS,CAAC,CAAAF,IAAA,CACjD,GAAI,CACF,KAAM,CAAEG,IAAK,CAAC,CAAG,KAAM,CAAAV,GAAG,CAACW,IAAI,CAAC,iBAAiB,CAAE,CAAEH,KAAK,CAAEC,QAAS,CAAC,CAAC,CAEvE,KAAM,CAAEG,KAAK,CAAEC,IAAI,CAAEC,OAAQ,CAAC,CAAGJ,IAAI,CAErC,GAAI,CAACE,KAAK,EAAI,EAACC,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEE,EAAE,EAAE,CACvB,MAAO,CACLC,OAAO,CAAE,KAAK,CACdC,SAAS,CAAE,kBAAkB,CAC7BC,YAAY,CAAE,4BAChB,CAAC,CACH,CAEA;AACAC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAER,KAAK,CAAC,CACpCO,YAAY,CAACC,OAAO,CAAC,SAAS,CAAEP,IAAI,CAACE,EAAE,CAAC,CACxCI,YAAY,CAACC,OAAO,CAAC,SAAS,CAAEC,IAAI,CAACC,SAAS,CAACT,IAAI,CAAC,CAAC,CAErD,MAAO,CACLG,OAAO,CAAE,IAAI,CACbJ,KAAK,CACLC,IAAI,CACJC,OACF,CAAC,CACH,CAAE,MAAOS,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZ,KAAM,CAAAvB,GAAG,CAAG,EAAAsB,aAAA,CAAAD,GAAG,CAACG,QAAQ,UAAAF,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcd,IAAI,UAAAe,kBAAA,iBAAlBA,kBAAA,CAAoBX,OAAO,GAAI,aAAa,CACxD,MAAO,CACLE,OAAO,CAAE,KAAK,CACdC,SAAS,CAAEhB,eAAe,CAACC,GAAG,CAAC,CAC/BgB,YAAY,CAAEhB,GAChB,CAAC,CACH,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}